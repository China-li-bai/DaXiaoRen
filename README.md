# ğŸ† Villain Smash - Digital Ritual Game

ä¸€ä¸ªç°ä»£åŒ–çš„"æ‰“å°äºº"æ¸¸æˆï¼Œç»“åˆ AI ç”Ÿæˆå’Œå®æ—¶æ’è¡Œæ¦œã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¨ **ç°ä»£åŒ– UI**ï¼šæ·±è‰²ä¸»é¢˜ï¼Œæµç•…åŠ¨ç”»
- ğŸ¤– **AI ç”Ÿæˆ**ï¼šä½¿ç”¨ Google Gemini ç”Ÿæˆå£è¯€å’Œç¥ç¦
- ğŸ† **å®æ—¶æ’è¡Œæ¦œ**ï¼šåŸºäº PartyKit çš„å…¨çƒæ’è¡Œæ¦œ
- ğŸŒ **åœ°ç†è¯†åˆ«**ï¼šè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·æ‰€åœ¨å›½å®¶/åœ°åŒº
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šä¿å­˜å†å²è®°å½•
- ğŸ”„ **å¤šè¯­è¨€**ï¼šæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡
- ğŸ’³ **ç§¯åˆ†ç³»ç»Ÿ**ï¼šçµæ´»çš„ç§¯åˆ†ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- npm æˆ– pnpm
- Google Gemini API Key

### å®‰è£…

```bash
npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å…¥ä½ çš„ API Keyï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
API_KEY=your-google-gemini-api-key-here
```

### æœ¬åœ°å¼€å‘

```bash
npm run dev
```

è®¿é—®ï¼šhttp://localhost:5173

### PartyKit æœ¬åœ°å¼€å‘

```bash
cd partykit
npx partykit dev
```

è®¿é—®ï¼šhttp://localhost:1999

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
DaXiaoRen/
â”œâ”€â”€ components/           # React ç»„ä»¶
â”‚   â”œâ”€â”€ VillainForm.tsx
â”‚   â”œâ”€â”€ RitualStage.tsx
â”‚   â”œâ”€â”€ Conclusion.tsx
â”‚   â”œâ”€â”€ LeaderboardWidget.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ geminiService.ts
â”‚   â”œâ”€â”€ supabaseClient.ts
â”‚   â””â”€â”€ storageService.ts
â”œâ”€â”€ partykit/            # PartyKit æœåŠ¡å™¨
â”‚   â”œâ”€â”€ server.ts
â”‚   â”œâ”€â”€ types.ts
â”‚   â”œâ”€â”€ geo-mapping.ts
â”‚   â””â”€â”€ partykit.json
â”œâ”€â”€ types.ts             # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ constants.ts         # å¸¸é‡å’Œç¿»è¯‘
â”œâ”€â”€ App.tsx             # ä¸»åº”ç”¨ç»„ä»¶
â””â”€â”€ index.html           # HTML å…¥å£
```

## ğŸŒ éƒ¨ç½²

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹ [DEPLOYMENT.md](DEPLOYMENT.md)

### å¿«é€Ÿéƒ¨ç½²

1. Fork æœ¬ä»“åº“
2. é…ç½® GitHub Secretsï¼š
   - `API_KEY`ï¼šGoogle Gemini API Key
   - `CLOUDFLARE_API_TOKEN`ï¼šCloudflare API Token
   - `CLOUDFLARE_ACCOUNT_ID`ï¼šCloudflare Account ID
3. æ¨é€åˆ° GitHub
4. GitHub Actions è‡ªåŠ¨éƒ¨ç½²

### éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GitHub Actions              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Build (npm run build)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚               â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚        â”‚                 â”‚   â”‚
â”‚   â”Œâ”€â”€â”€â–¼â”€â”€â”       â”Œâ”€â”€â”€â–¼â”€â”€â”â”‚
â”‚   â”‚  GitHub  â”‚       â”‚ PartyKitâ”‚â”‚
â”‚   â”‚  Pages   â”‚       â”‚        â”‚â”‚
â”‚   â”‚          â”‚       â”‚        â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â”‚
â”‚        â”‚                    â”‚      â”‚
â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”‚
â”‚   â”‚                â”‚      â”‚      â”‚
â”‚   â”‚  dadaxiaoren.comâ”‚      â”‚      â”‚
â”‚   â”‚                â”‚      â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚      â”‚
â”‚           â”‚              â”‚      â”‚
â”‚      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”˜      â”‚
â”‚      â”‚                           â”‚
â”‚      â”‚    ç”¨æˆ·è®¿é—®                â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ® æ¸¸æˆæµç¨‹

1. **åŒæ„æ¡æ¬¾**ï¼šé˜…è¯»å¹¶åŒæ„å…è´£å£°æ˜
2. **è¾“å…¥ä¿¡æ¯**ï¼šè¾“å…¥"å°äºº"ä¿¡æ¯ï¼ˆå§“åã€ç±»å‹ã€åŸå› ï¼‰
3. **ç”Ÿæˆå£è¯€**ï¼šAI ç”Ÿæˆä»ªå¼å£è¯€å’ŒæŒ‡å¯¼
4. **å¼€å§‹ä»ªå¼**ï¼šç‚¹å‡»å±å¹•è¿›è¡Œ"æ‰“å°äºº"
5. **è·å¾—ç¥ç¦**ï¼šAI ç”Ÿæˆç¥ç¦å’Œå»ºè®®
6. **åˆ†äº«ç»“æœ**ï¼šå¯åˆ†äº«ç»™å¥½å‹åŠ©é˜µ

## ğŸ† æ’è¡Œæ¦œç³»ç»Ÿ

### æ•°æ®ç»“æ„

```typescript
GlobalLeaderboardState {
  [countryCode: string]: {
    name: string;        // å›½å®¶åç§°
    score: number;        // æ€»åˆ†æ•°
    regions: {
      [regionCode: string]: number;  // å„åœ°åŒºåˆ†æ•°
    }
  }
}
```

### åœ°ç†è¯†åˆ«

- **å›½å®¶**ï¼šISO 3166-1 ä»£ç ï¼ˆCN, US, JP ç­‰ï¼‰
- **åœ°åŒº**ï¼šISO 3166-2 ä»£ç ï¼ˆBJ, SH, GD ç­‰ï¼‰
- **åŸå¸‚**ï¼šCloudflare è‡ªåŠ¨è¯†åˆ«

### å®æ—¶æ›´æ–°

- WebSocket å®æ—¶æ¨é€
- èŠ‚æµå¹¿æ’­ï¼ˆ1 ç§’å»¶è¿Ÿï¼‰
- é˜²æ­¢å¸¦å®½æµªè´¹

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹

- **é»˜è®¤**ï¼š< 640pxï¼ˆç§»åŠ¨ç«¯ï¼‰
- **sm**ï¼šâ‰¥ 640pxï¼ˆå¹³æ¿ï¼‰
- **md**ï¼šâ‰¥ 768pxï¼ˆæ¡Œé¢ï¼‰
- **lg**ï¼šâ‰¥ 1024pxï¼ˆå¤§å±ï¼‰

### ç§»åŠ¨ç«¯ä¼˜åŒ–

- å…¨å±æŠ½å±‰ç»„ä»¶
- è§¦æ‘¸å‹å¥½çš„æŒ‰é’®å°ºå¯¸
- è‡ªé€‚åº”å­—ä½“å’Œé—´è·
- é˜²æ­¢å¸ƒå±€æº¢å‡º

## ğŸ”§ æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šReact 19 + Vite 6
- **åç«¯**ï¼šPartyKit + Cloudflare Workers
- **AI**ï¼šGoogle Gemini API
- **æ ·å¼**ï¼šTailwind CSS
- **ç±»å‹**ï¼šTypeScript 5.8
- **éƒ¨ç½²**ï¼šGitHub Actions + Cloudflare

## ğŸ“„ è®¸å¯è¯

MIT License - è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ è”ç³»

å¦‚æœ‰é—®é¢˜ï¼Œè¯·åˆ›å»º Issue æˆ–è”ç³»ç»´æŠ¤è€…ã€‚

---

**å¿ƒè¯šåˆ™çµ Â· èµ›åšä»ªå¼** ğŸ™
